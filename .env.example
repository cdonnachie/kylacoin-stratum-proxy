# Kylacoin Configuration
KCN_RPC_USER=kylacoin_user
KCN_RPC_PASS=change_this_secure_password
KCN_RPC_PORT=5110
KCN_P2P_PORT=5111

# Lyncoin Configuration
LCN_RPC_USER=lyncoin_user
LCN_RPC_PASS=change_this_secure_password
LCN_RPC_PORT=5053
LCN_P2P_PORT=5054

# Wallet Addresses (UPDATE THESE WITH YOUR ACTUAL ADDRESSES)

# Kylacoin address (OPTIONAL - first miner connection will set the payout address)
# The miner's username (address) becomes the payout address automatically
# You can uncomment this to document your intended address:
# KCN_WALLET_ADDRESS=KYourKylacoinAddressHere

# Lyncoin address (OPTIONAL - for AuxPoW dual-chain mining)
# Leave blank to mine Kylacoin only (primary-only mode)
# Set to your Lyncoin address to enable AuxPoW dual-chain mining
LCN_WALLET_ADDRESS=

# Stratum Proxy Configuration
STRATUM_PORT=54321

# Proxy Configuration
# Custom signature to identify this proxy in coinbase transactions
# Keep it short (max 32 bytes recommended) and unique to your setup
PROXY_SIGNATURE=/your-pool-name/

# Advanced Settings (optional)
# Network Settings - uncomment and modify if needed
# KCN_RPC_HOST=192.168.0.100  # Override KCN RPC host (alternative: KCN_RPC_IP)
# LCN_RPC_HOST=192.168.0.100  # Override LCN RPC host (alternative: LCN_RPC_IP)

# Mining Optimization
# Enable easier target selection between KCN and LCN for better mining efficiency
USE_EASIER_TARGET=true

# Share difficulty divisor (controls how often miners submit shares)
# Formula: share_difficulty = network_difficulty / SHARE_DIFFICULTY_DIVISOR
# HIGHER value = EASIER shares = MORE frequent submissions
# LOWER value = HARDER shares = LESS frequent submissions
# 1.0 = network difficulty (only blocks submitted, no intermediate shares)
# 1000.0 = default balanced setting (recommended for production)
# 10000.0 = very easy shares, frequent submissions (good for testing/stats)
SHARE_DIFFICULTY_DIVISOR=1000.0

# === Variable Difficulty (VarDiff) Settings ===
# Optional per-miner adaptive difficulty targeting a share interval.
# Enable this to have the proxy automatically adjust each miner's difficulty so
# they (on average) submit one accepted share every target interval.
# When ENABLE_VARDIFF=true the static SHARE_DIFFICULTY_DIVISOR is ignored for
# connected miners (still used as a fallback if VarDiff fails).
# Recommended starting point: enable once you have multiple heterogeneous miners.

# Master switch (false = use fixed divisor only)
ENABLE_VARDIFF=false

# Target time between accepted shares per miner (seconds)
VARDIFF_TARGET_SHARE_TIME=15.0

# Bounds for per-miner difficulty (network uses very low absolute difficulty values)
# Observed KCN/LCN shareDiff / chain diff range: ~0.000001 – 0.01
# Start tiny so slow CPUs still produce an initial share quickly.
# Raise MAX only if high-hashrate miners are hitting the target interval too fast even
# at the upper bound (watch /api/vardiff_state for saturation).
VARDIFF_MIN_DIFFICULTY=0.00001        # Lowest allowed difficulty (previous example 0.01)
VARDIFF_MAX_DIFFICULTY=0.1            # Upper bound; plenty for 10–50x faster nodes
# Difficulty sizing math:  expected_time_seconds ≈ difficulty * 2^32 / hashrate_Hs
# Rearranged: difficulty ≈ hashrate_Hs * target_time / 2^32.
# With target=15s and 2^32 ≈ 4.294e9:
# difficulty ≈ hashrate_Hs * 3.493e-9.
#
# Accurate rough guide (target 15s):
#   25  KH/s  -> diff ≈ 0.000087
#   50  KH/s  -> diff ≈ 0.000175
#  100  KH/s  -> diff ≈ 0.000349
#  250  KH/s  -> diff ≈ 0.000873
#  500  KH/s  -> diff ≈ 0.001746
# 1000  KH/s  -> diff ≈ 0.00349  ( = 1 MH/s )
#
# Your observed shareDiff values (e.g. 0.000004 – 0.000015) are well below these
# targets, which is why shares arrive more frequently than 15s initially; VarDiff will
# ramp the difficulty upward toward the band implied above.

# Retarget triggers
VARDIFF_RETARGET_SHARES=20            # Minimum shares in window before considering adjustment
VARDIFF_RETARGET_TIME=300.0           # Or after this many seconds since last retarget (whichever comes first)

# Step size clamps (avoid huge jumps)
VARDIFF_UP_STEP=2.0                   # Max 2x increase per retarget
VARDIFF_DOWN_STEP=0.5                 # Max 0.5x decrease (i.e. halve) per retarget

# EMA smoothing for inter-share intervals (0 = no smoothing, 1 = only latest)
VARDIFF_EMA_ALPHA=0.3

# Inactivity handling
VARDIFF_INACTIVITY_LOWER=90.0         # If no share for this many seconds, allow difficulty decay
VARDIFF_INACTIVITY_MULTIPLES=6.0      # OR if idle > (multiples * target interval), trigger decay
VARDIFF_INACTIVITY_DROP_FACTOR=0.5    # Multiply difficulty by this on inactivity decay

# Persistence & warm start
VARDIFF_STATE_PATH=data/vardiff_state.json   # JSON snapshot (auto-saved every ~30s)
VARDIFF_WARM_START_MINUTES=60                # (Reserved for future DB warm-start of miner intervals)
# Headroom fraction: do not assign per-miner diff above (headroom * current chain diff)
VARDIFF_CHAIN_HEADROOM=0.9

# NOTE: You can omit any of the above to fall back to defaults shown here.

# For testnet operation (uncomment to enable)
# TESTNET=true

# ZMQ Configuration (for real-time block notifications)
# Enable ZMQ for better performance and immediate block updates
ENABLE_ZMQ=true                           # Enable/disable ZMQ
KCN_ZMQ_ENDPOINT=tcp://kylacoin:28332     # KCN ZMQ endpoint
LCN_ZMQ_ENDPOINT=tcp://lyncoin:28433      # LCN ZMQ endpoint

# ZMQ Port Configuration
KCN_ZMQ_PORT=28332                        # KCN ZMQ hashblock port
KCN_ZMQ_RAW_PORT=28333                    # KCN ZMQ rawblock port  
LCN_ZMQ_PORT=28433                        # LCN ZMQ hashblock port
LCN_ZMQ_RAW_PORT=28434                    # LCN ZMQ rawblock port

# Logging levels
VERBOSE=true  # Set to false for less verbose output
SHOW_JOBS=false  # Set to false to hide job notifications
DEBUG_SHARES=false  # Set to true to log all share submissions (including low difficulty)

# === Notification Settings ===
# Get notified when blocks are found!

# Discord Webhook (optional)
# Create webhook: Server Settings -> Integrations -> Webhooks -> New Webhook
# Copy the webhook URL and paste it here
# Example: https://discord.com/api/webhooks/1234567890/ABCdefGHIjklMNOpqrsTUVwxyz
#DISCORD_WEBHOOK_URL=

# Telegram Notifications (optional)
# 1. Message @BotFather on Telegram and send /newbot to create a bot
# 2. Copy the bot token provided
# 3. Start a chat with your new bot (send any message like "hello")
# 4. Get your chat ID from: https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
#    (Replace <YOUR_BOT_TOKEN> with your actual token, look for "chat":{"id":123456789})
# Example bot token: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz
# Example chat ID: 123456789
#TELEGRAM_BOT_TOKEN=
#TELEGRAM_CHAT_ID=

# === Bootstrap System Settings ===
# Automatic blockchain snapshot download for faster initial sync
# Greatly reduces initial sync time from hours to minutes

# Enable bootstrap download (recommended for first-time setup)
ENABLE_BOOTSTRAP=true

# Maximum age of bootstrap files to consider valid (in days)
# Files older than this will not be used; fresh download will be attempted
BOOTSTRAP_MAX_AGE_DAYS=30

# Force fresh bootstrap download even if recent one exists
# Useful for syncing with latest state or after long downtime
BOOTSTRAP_FORCE=false

# Verify checksums of downloaded bootstrap files (recommended for security)
# Adds slight overhead but ensures data integrity
BOOTSTRAP_VERIFY_CHECKSUM=true

# === Web Dashboard Settings ===
# Optional web interface for monitoring your mining operations

# Enable Dashboard (disabled by default for minimal overhead)
ENABLE_DASHBOARD=true

# Dashboard Port (default: 8080)
# Access at http://localhost:8080 when enabled
DASHBOARD_PORT=8080

# Enable Database for Statistics (disabled by default)
# When enabled, stores block history, connections, and share stats in SQLite
# Recommended if using dashboard for historical data
# Database location: ./data/mining.db
ENABLE_DATABASE=true

# Note: Dashboard can work without database (shows only real-time data)
# Database can be enabled independently for logging even without dashboard
